import { Product } from "../utils/types";

export let productsFromServer: Product[] = [
  {
    "id": 1,
    "name": "Product 1",
    "type": "Type A",
    "warranty_date": "1 JAN 2023",
    "order_id": 1,
    "status": "Free",
    "age": "New",
    "price": 467.64
  },
  {
    "id": 2,
    "name": "Product 2",
    "type": "Type B",
    "warranty_date": "15 FEB 2023",
    "order_id": 1,
    "status": "Repair",
    "age": "Used",
    "price": 7800
  },
  {
    "id": 3,
    "name": "Product 3",
    "type": "Type A",
    "warranty_date": "5 MAR 2023",
    "order_id": 1,
    "status": "Free",
    "age": "New",
    "price": 895.56
  },
  {
    "id": 4,
    "name": "Product 4",
    "type": "Type C",
    "warranty_date": "10 APR 2023",
    "order_id": 2,
    "status": "Repair",
    "age": "Used",
    "price": 7862.90
  },
  {
    "id": 5,
    "name": "Product 5",
    "type": "Type B",
    "warranty_date": "30 MAY 2023",
    "order_id": 2,
    "status": "Free",
    "age": "New",
    "price": 976.56
  },
  {
    "id": 6,
    "name": "Product 6",
    "type": "Type A",
    "warranty_date": "2 JUN 2023",
    "order_id": 3,
    "status": "Free",
    "age": "New",
    "price": 1000
  },
  {
    "id": 7,
    "name": "Product 7",
    "type": "Type C",
    "warranty_date": "19 JUL 2023",
    "order_id": 3,
    "status": "Repair",
    "age": "Used",
    "price": 988
  },
  {
    "id": 8,
    "name": "Product 8",
    "type": "Type B",
    "warranty_date": "7 AUG 2023",
    "order_id": 3,
    "status": "Free",
    "age": "New",
    "price": 368.09
  },
  {
    "id": 9,
    "name": "Product 9",
    "type": "Type A",
    "warranty_date": "23 SEP 2023",
    "order_id": 4,
    "status": "Free",
    "age": "New",
    "price": 1300
  },
  {
    "id": 10,
    "name": "Product 10",
    "type": "Type C",
    "warranty_date": "11 OCT 2023",
    "order_id": 4,
    "status": "Repair",
    "age": "Used",
    "price": 866
  },
  {
    "id": 11,
    "name": "Product 11",
    "type": "Type B",
    "warranty_date": "8 NOV 2023",
    "order_id": 4,
    "status": "Free",
    "age": "New",
    "price": 3567
  },
  {
    "id": 12,
    "name": "Product 12",
    "type": "Type A",
    "warranty_date": "12 DEC 2023",
    "order_id": 5,
    "status": "Free",
    "age": "New",
    "price": 864.34
  },
  {
    "id": 13,
    "name": "Product 13",
    "type": "Type C",
    "warranty_date": "25 JAN 2024",
    "order_id": 5,
    "status": "Repair",
    "age": "Used",
    "price": 100
  },
  {
    "id": 14,
    "name": "Product 14",
    "type": "Type B",
    "warranty_date": "14 FEB 2024",
    "order_id": 5,
    "status": "Free",
    "age": "New",
    "price": 754.99
  },
  {
    "id": 15,
    "name": "Product 15",
    "type": "Type A",
    "warranty_date": "6 MAR 2024",
    "order_id": 6,
    "status": "Free",
    "age": "New",
    "price": 843
  },
  {
    "id": 16,
    "name": "Product 16",
    "type": "Type C",
    "warranty_date": "6 MAR 2024",
    "order_id": 6,
    "status": "Repair",
    "age": "Used",
    "price": 675
  },
  {
    "id": 17,
    "name": "Product 17",
    "type": "Type A",
    "warranty_date": "9 APR 2024",
    "order_id": 6,
    "status": "Free",
    "age": "New",
    "price": 2345
  },
  {
    "id": 18,
    "name": "Product 18",
    "type": "Type B",
    "warranty_date": "27 MAY 2024",
    "order_id": 6,
    "status": "Repair",
    "age": "Used",
    "price": 567.67
  },
  {
    "id": 19,
    "name": "Product 19",
    "type": "Type C",
    "warranty_date": "11 JUN 2024",
    "order_id": 7,
    "status": "Free",
    "age": "New",
    "price": 983
  },
  {
    "id": 20,
    "name": "Product 20",
    "type": "Type A",
    "warranty_date": "3 JUL 2024",
    "order_id": 7,
    "status": "Repair",
    "age": "Used",
    "price": 743
  },
  {
    "id": 21,
    "name": "Product 21",
    "type": "Type B",
    "warranty_date": "14 AUG 2024",
    "order_id": 7,
    "status": "Free",
    "age": "New",
    "price": 756
  },
  {
    "id": 22,
    "name": "Product 22",
    "type": "Type A",
    "warranty_date": "22 SEP 2024",
    "order_id": 8,
    "status": "Free",
    "age": "New",
    "price": 234.99
  },
  {
    "id": 23,
    "name": "Product 23",
    "type": "Type C",
    "warranty_date": "18 OCT 2024",
    "order_id": 8,
    "status": "Repair",
    "age": "Used",
    "price": 1070
  },
  {
    "id": 24,
    "name": "Product 24",
    "type": "Type B",
    "warranty_date": "8 NOV 2024",
    "order_id": 8,
    "status": "Free",
    "age": "New",
    "price": 345.49
  },
  {
    "id": 25,
    "name": "Product 25",
    "type": "Type A",
    "warranty_date": "3 DEC 2024",
    "order_id": 9,
    "status": "Free",
    "age": "New",
    "price": 968
  }
];

export const getAllproducts = (): Product[] => {
  return productsFromServer;
}

export const getProductById = (productId: number): Product | null => {
  return productsFromServer.find(product => product.id === productId) || null;
}

export const removeProduct = (productId: number): void => {
  productsFromServer = productsFromServer.filter(product => product.id !== productId);
}

export const createProduct = (newProduct: Omit<Omit<Product, 'id'>, 'warranty_date'>): Product => {
  const monthNames = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'];
  const date = new Date();
  const warranty_date = `${date.getDate()} ${monthNames[date.getMonth()]} ${date.getFullYear()}`;

  const product: Product = {
    ...newProduct,
    id: +(new Date()),
    warranty_date
  }

  productsFromServer = [product, ...productsFromServer];

  return product;
}

export const updateProduct = (newProduct: Product): void => {
  let foundedProduct = productsFromServer.find(product => product.id === newProduct.id);

  if (!!foundedProduct) {
    foundedProduct = {
      ...foundedProduct,
      ...newProduct
    }
  }
}
